<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Content Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .bounce-1 { animation: bounce 1s infinite; }
    .bounce-2 { animation: bounce 1s infinite 0.1s; }
    .bounce-3 { animation: bounce 1s infinite 0.2s; }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
  </style>
</head>
<body class="bg-white">
  <div id="app" class="min-h-screen"></div>
  <script>
    const BRAND_VOICE = {
      'Social Media': { style: 'Conversational, engaging, approachable', voice: ['Friendly', 'Witty', 'Helpful'], use: 'discover, transform, empower', avoid: 'jargon, synergy, leverage' },
      'PR News': { style: 'Professional, newsworthy, factual', voice: ['Authoritative', 'Clear', 'Credible'], use: 'announces, launches, partners', avoid: 'buzzwords, hype' },
      'Thought Leadership': { style: 'Authoritative, insightful, forward-thinking', voice: ['Expert', 'Visionary', 'Trustworthy'], use: 'insights, innovation, strategy', avoid: 'maybe, possibly, basic' },
      'Case Study': { style: 'Results-driven, specific, compelling', voice: ['Credible', 'Detailed', 'Persuasive'], use: 'achieved, improved, delivered', avoid: 'vague, unsubstantiated' },
      'Newsletter': { style: 'Warm, informative, value-driven', voice: ['Personable', 'Helpful', 'Engaging'], use: 'you, discover, exclusive', avoid: 'spam triggers, clickbait' },
      'Paid Media': { style: 'Concise, action-oriented, benefit-focused', voice: ['Direct', 'Compelling', 'Urgent'], use: 'get, start, discover, free', avoid: 'long sentences, weak CTAs' }
    };
    let state = { contentType: 'Social Media', messages: [{ role: 'assistant', content: "Hi! I'm your brand content assistant. Select a content type and tell me what you'd like to create." }], input: '', loading: false };
    
    async function callClaude(userMessage) {
      const voice = BRAND_VOICE[state.contentType];
      const systemPrompt = `You are a brand content creator for ${state.contentType}. Style: ${voice.style}. Voice: ${voice.voice.join(', ')}. Use: ${voice.use}. Avoid: ${voice.avoid}. Create ready-to-use content.`;
      const messages = state.messages.filter((m, i) => i > 0).slice(-10).concat([{ role: 'user', content: userMessage }]);
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 4096, system: systemPrompt, messages })
      });
      if (!response.ok) throw new Error('API failed');
      return (await response.json()).content[0].text;
    }
    
    async function sendMessage() {
      if (!state.input.trim() || state.loading) return;
      const userMessage = state.input;
      state.messages.push({ role: 'user', content: userMessage });
      state.input = '';
      state.loading = true;
      render();
      try {
        const response = await callClaude(userMessage);
        state.messages.push({ role: 'assistant', content: response });
      } catch (e) {
        state.messages.push({ role: 'assistant', content: 'Error: ' + e.message });
      }
      state.loading = false;
      render();
      document.getElementById('chat-container').scrollTop = document.getElementById('chat-container').scrollHeight;
    }
    
    function copyLastResponse() {
      const last = state.messages.filter(m => m.role === 'assistant').pop();
      if (last) { navigator.clipboard.writeText(last.content); showToast('Copied!'); }
    }
    
    function resetChat() {
      state.messages = [{ role: 'assistant', content: "Hi! I'm your brand content assistant. Select a content type and tell me what you'd like to create." }];
      render();
    }
    
    function showToast(msg) {
      const t = document.createElement('div');
      t.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-4 py-2 rounded-lg text-sm z-50';
      t.textContent = msg;
      document.body.appendChild(t);
      setTimeout(() => t.remove(), 2000);
    }
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    function render() {
      const types = ['Social Media', 'PR News', 'Thought Leadership', 'Case Study', 'Newsletter', 'Paid Media'];
      document.getElementById('app').innerHTML = `
        <div class="flex flex-col h-screen">
          <div class="bg-white border-b px-4 py-3">
            <div class="flex items-center gap-2 mb-3">
              <div class="w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-500 rounded-lg flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
              </div>
              <div><h1 class="font-semibold text-slate-900">Content Studio</h1><p class="text-xs text-slate-500">AI-powered brand content</p></div>
            </div>
            <select id="content-type" class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-medium bg-white">
              ${types.map(t => `<option value="${t}" ${state.contentType === t ? 'selected' : ''}>${t}</option>`).join('')}
            </select>
          </div>
          <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50">
            ${state.messages.map(m => `
              <div class="flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}">
                <div class="max-w-[85%] rounded-2xl px-4 py-2 ${m.role === 'user' ? 'bg-slate-900 text-white' : 'bg-white border border-slate-200 text-slate-900'}">
                  <p class="text-sm whitespace-pre-wrap leading-relaxed">${escapeHtml(m.content)}</p>
                </div>
              </div>
            `).join('')}
            ${state.loading ? `<div class="flex justify-start"><div class="bg-white border border-slate-200 rounded-2xl px-4 py-3"><div class="flex gap-1"><div class="w-2 h-2 bg-slate-400 rounded-full bounce-1"></div><div class="w-2 h-2 bg-slate-400 rounded-full bounce-2"></div><div class="w-2 h-2 bg-slate-400 rounded-full bounce-3"></div></div></div></div>` : ''}
          </div>
          <div class="bg-white border-t p-3">
            <div class="flex gap-2 mb-2">
              <input type="text" id="message-input" placeholder="Describe what content you need..." class="flex-1 px-4 py-2 border border-slate-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-purple-500" value="${escapeHtml(state.input)}" ${state.loading ? 'disabled' : ''}/>
              <button id="send-btn" class="px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-medium disabled:bg-slate-300" ${state.loading || !state.input.trim() ? 'disabled' : ''}>Send</button>
            </div>
            <div class="flex gap-2">
              <button id="copy-btn" class="flex-1 px-3 py-1.5 border border-slate-300 rounded-lg text-xs font-medium text-slate-600 hover:bg-slate-50 flex items-center justify-center gap-1">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy
              </button>
              <button id="reset-btn" class="flex-1 px-3 py-1.5 border border-slate-300 rounded-lg text-xs font-medium text-slate-600 hover:bg-slate-50 flex items-center justify-center gap-1">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>New
              </button>
            </div>
          </div>
        </div>`;
      document.getElementById('content-type').addEventListener('change', e => { state.contentType = e.target.value; });
      document.getElementById('message-input').addEventListener('input', e => { state.input = e.target.value; });
      document.getElementById('message-input').addEventListener('keypress', e => { if (e.key === 'Enter') sendMessage(); });
      document.getElementById('send-btn').addEventListener('click', sendMessage);
      document.getElementById('copy-btn').addEventListener('click', copyLastResponse);
      document.getElementById('reset-btn').addEventListener('click', resetChat);
    }
    render();
  </script>
</body>
</html>
